Version 4
SHEET 1 5720 1884
WIRE 400 -96 400 -160
WIRE 768 -96 768 -160
WIRE 1280 -96 1216 -96
WIRE 1536 -96 1344 -96
WIRE 1648 -96 1536 -96
WIRE 1824 -96 1728 -96
WIRE 1888 -96 1824 -96
WIRE 1824 -80 1824 -96
WIRE 400 -16 192 -16
WIRE 976 -16 768 -16
WIRE 1824 -16 1216 -16
WIRE 1888 -16 1824 -16
WIRE 336 32 192 32
WIRE 976 32 832 32
WIRE 1888 32 1888 -16
WIRE 1296 64 1216 64
WIRE 1456 64 1456 48
WIRE 1456 64 1360 64
WIRE 1536 64 1536 -96
WIRE 1536 64 1456 64
WIRE 400 112 400 80
WIRE 400 112 320 112
WIRE 544 112 400 112
WIRE 768 112 768 80
WIRE 768 112 544 112
WIRE 848 112 768 112
WIRE 528 368 304 368
WIRE 1312 416 1216 416
WIRE 304 464 304 368
WIRE 800 464 496 464
WIRE 976 480 912 480
WIRE 1216 480 1216 416
WIRE 1216 480 1168 480
WIRE 1232 480 1216 480
WIRE 304 496 224 496
WIRE 1344 496 1296 496
WIRE 1488 496 1424 496
WIRE 1232 512 1168 512
WIRE 528 528 528 368
WIRE 528 528 496 528
WIRE 672 528 528 528
WIRE 1168 528 1168 512
WIRE 1312 800 1216 800
WIRE 544 816 496 816
WIRE 576 816 544 816
WIRE 208 848 32 848
WIRE 224 848 224 496
WIRE 224 848 208 848
WIRE 304 848 224 848
WIRE 672 848 672 528
WIRE 800 848 672 848
WIRE 976 864 912 864
WIRE 1216 864 1216 800
WIRE 1216 864 1168 864
WIRE 1232 864 1216 864
WIRE 1344 880 1296 880
WIRE 1488 880 1424 880
WIRE 1232 896 1168 896
WIRE 1168 912 1168 896
WIRE 496 944 496 880
WIRE 544 944 496 944
WIRE 576 944 544 944
WIRE -192 1072 -208 1072
WIRE 16 1072 -192 1072
WIRE 144 1088 80 1088
WIRE 400 1088 400 960
WIRE 400 1088 144 1088
WIRE 16 1104 -32 1104
WIRE -32 1216 -32 1104
WIRE -80 1264 -240 1264
WIRE -240 1328 -240 1264
WIRE -32 1344 -32 1216
WIRE -32 1344 -80 1344
WIRE -240 1392 -240 1328
FLAG -528 -80 0
FLAG -528 -160 VCC
FLAG 400 192 0
FLAG -704 -64 0
FLAG -704 -144 P15V
FLAG 400 -240 P15V
FLAG 544 112 IRAMP
FLAG -288 1072 IRAMP
FLAG 544 816 SW
FLAG 80 1104 0
FLAG 48 1056 VCC
FLAG 144 1008 VCC
FLAG 544 944 CSW
FLAG 1888 32 0
FLAG 192 32 FSW1
FLAG 48 1120 0
FLAG 208 848 QRST
FLAG 32 928 0
FLAG 304 816 VCC
FLAG 400 736 VCC
FLAG -192 1136 0
FLAG -240 1472 0
FLAG -32 1216 ISET
FLAG -80 1424 0
FLAG -240 1328 ICTL
FLAG 400 384 VCC
FLAG 400 608 VCC
FLAG 800 496 SW
FLAG 800 880 SW
FLAG 768 -240 P15V
FLAG 976 32 FSW2
FLAG 1264 464 VCC
FLAG 1264 528 0
FLAG 1168 608 0
FLAG 1488 496 FSW1
FLAG 192 -16 DRAIN1
FLAG 1376 416 DRAIN1
FLAG 976 -16 DRAIN2
FLAG 1264 848 VCC
FLAG 1264 912 0
FLAG 1168 992 0
FLAG 1488 880 FSW2
FLAG 1376 800 DRAIN2
SYMBOL voltage -528 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL ind2 384 -112 R0
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL npn 336 -16 R0
SYMATTR InstName Q1
SYMATTR Value FJL4315
SYMBOL res 384 96 R0
SYMATTR InstName R1
SYMATTR Value 0.05
SYMBOL ind2 1200 0 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL voltage -704 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL res 416 -144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.01R
SYMBOL res -304 1088 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 85 57 VBottom 2
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 128 992 R0
SYMATTR InstName R14
SYMATTR Value 3.3k
SYMBOL res 1872 -112 R0
SYMATTR InstName R5
SYMATTR Value 50R
SYMBOL xcomp_x11 48 1024 R0
SYMATTR InstName U5
SYMATTR Value LM311
SYMBOL voltage 32 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -271 -43 Left 2
WINDOW 0 -23 -10 Left 2
SYMATTR Value PULSE(0 3.3 0 100n 100n 0.05ms 0.1ms 30)
SYMATTR InstName VIN1
SYMBOL 74hc74 400 736 R0
SYMATTR InstName U1
SYMBOL cap -208 1072 R0
SYMATTR InstName C1
SYMATTR Value 1p
SYMBOL voltage -240 1376 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 0.4
SYMATTR InstName V1
SYMBOL res -96 1248 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -96 1328 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL 74hc74 400 384 R0
SYMATTR InstName U3
SYMBOL 74hc08 848 416 R0
SYMATTR InstName U2
SYMBOL 74hc04 1024 416 R0
SYMATTR InstName U4
SYMBOL 74hc08 848 800 R0
SYMATTR InstName U6
SYMBOL 74hc04 1024 800 R0
SYMATTR InstName U7
SYMBOL ind2 752 0 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL npn 832 -16 M0
SYMATTR InstName Q6
SYMATTR Value FJL4315
SYMBOL res 752 -144 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 0.01R
SYMBOL ind2 1200 80 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L4
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL ind2 1632 -112 M90
WINDOW 0 4 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L5
SYMATTR Value 400µ
SYMATTR Type ind
SYMBOL schottky 1280 -80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value SS3P5
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1296 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value SS3P5
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1808 -80 R0
SYMATTR InstName C2
SYMATTR Value 20µ
SYMBOL OpAmps\\LT1006 1264 432 R0
WINDOW 3 -35 179 Left 2
SYMATTR InstName U8
SYMBOL res 1184 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL cap 1376 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -31 -28 VTop 2
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL res 1440 480 R90
WINDOW 0 73 79 VBottom 2
WINDOW 3 42 6 VTop 2
SYMATTR InstName R12
SYMATTR Value 250R
SYMBOL voltage 1168 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 2.5
SYMATTR InstName V3
SYMBOL OpAmps\\LT1006 1264 816 R0
WINDOW 3 -35 179 Left 2
SYMATTR InstName U9
SYMBOL res 1184 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL cap 1376 784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -31 -28 VTop 2
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL res 1440 864 R90
WINDOW 0 73 79 VBottom 2
WINDOW 3 42 6 VTop 2
SYMATTR InstName R3
SYMATTR Value 250R
SYMBOL voltage 1168 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 2.5
SYMATTR InstName V5
TEXT -168 -224 Left 2 !.tran 1.5ms
TEXT -208 -312 Left 2 !.include 74hc.lib
TEXT 1024 -456 Left 2 !K L1 L2 L3 L4 0.99
TEXT -184 -368 Left 2 !.include standard.bjt
TEXT -176 -272 Left 2 !.include LM311.301
TEXT 864 1152 Left 2 ;should just use a fet driver. mcp\n mcp14a0154
TEXT 960 -648 Left 2 ;shows use with high-side pnp

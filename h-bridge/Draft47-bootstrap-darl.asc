Version 4
SHEET 1 3300 1956
WIRE -48 -400 -48 -480
WIRE 480 -240 448 -240
WIRE 544 -240 480 -240
WIRE 2720 -208 2496 -208
WIRE 912 -192 832 -192
WIRE 1008 -192 912 -192
WIRE 1072 -192 1008 -192
WIRE 1264 -192 1200 -192
WIRE 1344 -192 1264 -192
WIRE 1808 -192 1728 -192
WIRE 1872 -192 1808 -192
WIRE 2144 -192 2064 -192
WIRE 2240 -192 2144 -192
WIRE 272 -160 240 -160
WIRE 448 -160 448 -176
WIRE 448 -160 336 -160
WIRE 832 -160 832 -192
WIRE 2240 -160 2240 -192
WIRE 2496 -160 2496 -208
WIRE 2720 -160 2720 -208
WIRE 1008 -112 896 -112
WIRE 2176 -112 2064 -112
WIRE 944 -64 832 -64
WIRE 1200 -64 1200 -192
WIRE 1872 -64 1872 -192
WIRE 2240 -64 2128 -64
WIRE 240 -16 208 -16
WIRE 1136 -16 1008 -16
WIRE 1344 -16 1344 -192
WIRE 1728 -16 1728 -192
WIRE 2064 -16 1936 -16
WIRE 2496 -16 2496 -80
WIRE 2720 -16 2720 -80
WIRE 2720 -16 2496 -16
WIRE 1280 32 1200 32
WIRE 1872 32 1792 32
WIRE 2064 32 2064 -16
WIRE 1008 48 1008 -16
WIRE 32 64 0 64
WIRE 208 64 208 48
WIRE 208 64 96 64
WIRE 2720 64 2720 -16
WIRE 1344 112 1344 80
WIRE 1344 112 1200 112
WIRE 1728 112 1728 80
WIRE 1872 112 1728 112
WIRE 304 128 208 128
WIRE 368 128 304 128
WIRE 1344 224 1344 112
WIRE 1456 224 1344 224
WIRE 1504 224 1456 224
WIRE 1664 224 1584 224
WIRE 1728 224 1728 112
WIRE 1728 224 1664 224
WIRE 656 288 544 288
WIRE 752 288 736 288
WIRE 816 288 752 288
WIRE 1344 288 1344 224
WIRE 1344 288 1200 288
WIRE 1728 288 1728 224
WIRE 1872 288 1728 288
WIRE 2224 288 2208 288
WIRE 2352 288 2304 288
WIRE 2400 288 2352 288
WIRE 2592 288 2480 288
WIRE 2640 288 2592 288
WIRE 1344 320 1344 288
WIRE 1728 320 1728 288
WIRE 1280 368 1200 368
WIRE 1872 368 1792 368
WIRE 752 400 752 288
WIRE 784 400 752 400
WIRE 2352 400 2352 288
WIRE 2352 400 2320 400
WIRE 1008 416 1008 304
WIRE 1008 416 848 416
WIRE 1104 416 1008 416
WIRE 1136 416 1104 416
WIRE 2064 416 2064 288
WIRE 2064 416 1936 416
WIRE 2256 416 2064 416
WIRE 784 432 752 432
WIRE 2432 432 2320 432
WIRE 752 480 752 432
WIRE 1104 496 1104 416
WIRE 1200 640 1200 464
WIRE 1200 640 1008 640
WIRE 1344 640 1344 416
WIRE 1344 640 1200 640
WIRE 1728 640 1728 416
WIRE 1872 640 1872 464
WIRE 1872 640 1728 640
WIRE 2112 640 1872 640
WIRE 1200 688 1200 640
WIRE 1872 688 1872 640
FLAG -48 -560 VCC
FLAG 1456 224 VOUT
FLAG 544 368 0
FLAG 1264 -192 VCC
FLAG 880 288 VOUT
FLAG 1200 688 0
FLAG -48 -400 0
FLAG 752 560 0
FLAG 816 448 0
FLAG 832 16 0
FLAG 1664 224 VOUT2
FLAG 1872 688 0
FLAG 2288 448 0
FLAG 2240 16 0
FLAG 2208 288 VOUT2
FLAG 2592 288 VOUT
FLAG 2432 512 0
FLAG 2720 64 0
FLAG 240 -160 VOUT
FLAG 448 -96 VCC
FLAG 544 -176 0
FLAG 480 -240 BOOT-PLUS
FLAG 912 -192 BOOT-PLUS
FLAG 2144 -192 BOOT-PLUS
FLAG 816 384 BOOT-PLUS
FLAG 2288 384 BOOT-PLUS
FLAG 0 64 VOUT
FLAG 304 64 0
FLAG 368 128 BOOT-SUB
FLAG 240 -16 0
FLAG 1808 -192 VCC
SYMBOL pnp 944 -16 M180
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL pnp 896 -64 R180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 1024 -208 M0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage -48 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 6
SYMATTR InstName V1
SYMBOL res 848 -80 M0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL npn 1136 -64 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL pnp 1136 464 M180
SYMATTR InstName Q6
SYMATTR Value 2N3906
SYMBOL voltage 544 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -271 -43 Left 2
WINDOW 0 -23 -10 Left 2
SYMATTR Value PULSE(0 3.3 0 100n 100n 0.2ms 0.4ms 14)
SYMATTR InstName VIN1
SYMBOL res 640 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 5k
SYMBOL cap 880 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 5n
SYMBOL voltage 752 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 51 83 Left 2
WINDOW 0 52 43 Left 2
SYMATTR Value 1.6
SYMATTR InstName VIN2
SYMBOL res 1184 16 R0
SYMATTR InstName R3
SYMATTR Value 270
SYMBOL res 1184 272 R0
SYMATTR InstName R4
SYMATTR Value 270
SYMBOL pnp 1280 416 M180
SYMATTR InstName Q10
SYMATTR Value MJE15035
SYMBOL npn 1280 -16 R0
SYMATTR InstName Q11
SYMATTR Value MJE15034
SYMBOL OpAmps\\LT1006 816 352 R0
SYMATTR InstName U1
SYMBOL pnp 2128 -16 R180
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL pnp 2176 -64 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 2048 -208 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 2224 -80 R0
SYMATTR InstName R2
SYMATTR Value 20k
SYMBOL res 2496 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL diode 2080 96 M0
WINDOW 0 59 7 Left 2
SYMATTR InstName D4
SYMBOL res 2736 -176 M0
SYMATTR InstName R16
SYMATTR Value 200R
SYMBOL OpAmps\\LT1006 2288 352 M0
SYMATTR InstName U2
SYMBOL res 2320 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 5k
SYMBOL voltage 2432 416 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 51 83 Left 2
WINDOW 0 52 43 Left 2
SYMATTR Value 2.8
SYMATTR InstName VIN3
SYMBOL ind2 1600 208 R90
WINDOW 0 4 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL ind2 2512 -64 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 32m
SYMATTR Type ind
SYMBOL diode 464 -96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 464 -176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL cap 560 -176 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 100µ
SYMBOL cap 272 -144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL diode 224 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 224 48 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL cap 288 64 R0
SYMATTR InstName C4
SYMATTR Value 100µ
SYMBOL cap 32 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C5
SYMATTR Value 100µ
SYMBOL npn 1936 -64 M0
SYMATTR InstName Q7
SYMATTR Value 2N3904
SYMBOL res 1888 16 M0
SYMATTR InstName R5
SYMATTR Value 270
SYMBOL npn 1792 -16 M0
SYMATTR InstName Q9
SYMATTR Value MJE15034
SYMBOL pnp 1936 464 R180
SYMATTR InstName Q8
SYMATTR Value 2N3906
SYMBOL res 1888 272 M0
SYMATTR InstName R7
SYMATTR Value 270
SYMBOL pnp 1792 416 R180
SYMATTR InstName Q12
SYMATTR Value MJE15035
SYMBOL diode 2080 32 M0
WINDOW 0 46 26 Left 2
SYMATTR InstName D10
SYMBOL diode 2080 160 M0
WINDOW 0 56 0 Left 2
SYMATTR InstName D11
SYMBOL diode 2080 224 M0
WINDOW 0 64 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1024 112 M0
WINDOW 0 59 7 Left 2
SYMATTR InstName D1
SYMBOL diode 1024 48 M0
WINDOW 0 46 26 Left 2
SYMATTR InstName D2
SYMBOL diode 1024 176 M0
WINDOW 0 56 0 Left 2
SYMATTR InstName D9
SYMBOL diode 1024 240 M0
WINDOW 0 64 0 Left 2
SYMATTR InstName D12
TEXT 688 -392 Left 2 !.tran 6ms
TEXT 672 392 Left 2 ;plus
TEXT 216 440 Left 2 ;input 0-3v3 square wave input.\nfrom mcu/ oscillator etc
TEXT -272 -280 Left 2 !.include standard.bjt
TEXT 2432 392 Right 2 ;plus
TEXT 984 -576 Left 2 ;- still have issue of potential flux walk\n- consider add protective diodes, across output bjt.\n- consider remove 0.1R. emitter degenerators\n -consider series resistor with output of bjt.\n- advantage of op-amp, can also drive with pure sine-wave
TEXT 2480 -312 Left 2 !K  L1 L2 0.99
TEXT 648 168 Left 2 ;ie. integrator
TEXT 2280 192 Left 2 ;ie. inverter
TEXT 400 848 Left 2 ;https://sound-au.com/articles/cmpd-vs-darl.htm
TEXT 2048 -464 Left 2 ;need to try,  with two inverter configuration, and bypass level.\n \nalso try lo nmos hi /pmos . should be possible with square wave. \nand diodes for fast switch off
